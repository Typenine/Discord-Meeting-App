# Frontend Environment Variables

# ============================================================================
# REQUIRED FOR PRODUCTION DEPLOYMENT
# ============================================================================
# Option 1: Set VITE_API_BASE to the full API base URL (recommended)
# If set, it will be used EXACTLY as provided (no string replacements or domain manipulation).
# The system will ensure it ends with /api (adding it only if missing).
# Example: VITE_API_BASE=https://your-worker.workers.dev
# 
# Option 2: Set VITE_WORKER_DOMAIN to your Cloudflare Worker domain
# This is only used as a fallback if VITE_API_BASE is not set.
# Must be a full host like xxx.workers.dev (not xxx.workers).
# If it doesn't end in .workers.dev, the system will throw an error and show a UI banner.
# Example: VITE_WORKER_DOMAIN=discord-agenda-activity-worker.yourusername.workers.dev
# DO NOT include protocol (https:// or wss://) - it will be added automatically

# VITE_API_BASE=
VITE_WORKER_DOMAIN=

# ============================================================================
# OPTIONAL: EXPLICIT WEBSOCKET URL OVERRIDE
# ============================================================================
# Set this to override the WebSocket URL instead of deriving it from API_BASE
# Use this if your WebSocket endpoint is different from the HTTP API endpoint
# Example: VITE_WS_URL=wss://your-ws-endpoint.example.com/ws
# VITE_WS_URL=

# ============================================================================
# OPTIONAL: PUBLIC APP URL FOR INVITE LINKS
# ============================================================================
# Set this to your public-facing frontend URL to generate correct invite links
# that work without requiring Vercel authentication.
# If not set, invite links will use window.location.origin as fallback.
# Example: VITE_PUBLIC_APP_URL=https://discord-meeting-production.vercel.app
# VITE_PUBLIC_APP_URL=

# ============================================================================
# HOW IT WORKS
# ============================================================================
# 1. If VITE_API_BASE is set:
#    - Use it exactly as provided
#    - Ensure it ends with /api (add if missing)
#    - Derive wsUrl by replacing https:// with wss:// and appending /ws (unless VITE_WS_URL is set)
#    - Example: https://host/api -> wss://host/api/ws
#
# 2. If VITE_API_BASE is not set, fall back to VITE_WORKER_DOMAIN:
#    - Must end with .workers.dev (error if not)
#    - Construct apiBase as https://${VITE_WORKER_DOMAIN}/api
#    - Construct wsUrl as wss://${VITE_WORKER_DOMAIN}/api/ws (unless VITE_WS_URL is set)
#
# 3. If VITE_WS_URL is explicitly set, it will be used for WebSocket connections
#    regardless of how API_BASE was derived
#
# 4. In production without explicit config, will attempt same-origin /api as fallback
#
# 5. The final apiBase and wsUrl are logged to console for debugging

# ============================================================================
# LOCAL DEVELOPMENT
# ============================================================================
# For local development, you can leave these empty.
# The app will automatically use:
#   - ws://localhost:8787/api/ws for WebSocket
#   - http://localhost:8787/api for HTTP API
# 
# To test with a deployed worker locally:
# VITE_WORKER_DOMAIN=your-worker.workers.dev
